<ion-view hide-back-button="false" hide-nav-bar="false">
  <ion-nav-title><b style="font-size: 18px"> Agripro</b> </ion-nav-title>
  <ion-nav-buttons side="right">
    <!-- <button class="button ion-power btn-home" style="font-size: 20px;
                 color: #4c4c4c;" ng-click="vm.goback()"></button> -->
  </ion-nav-buttons>
  <style>
    @import url("https://fonts.googleapis.com/css?family=Prompt&display=swap");

    .bg-image {
      /* The image used */
      background-image: url("img/weather/bg-sky.jpg");
      /* background-image: url("img/weather/2.jpg"); */

      /* Add the blur effect */
      filter: blur(5px);
      -webkit-filter: blur(5px);

      /* Full height */
      height: 100%;

      /* Center and scale the image nicely */
      background-position: center;
      background-repeat: no-repeat;
      background-size: cover;
    }

    .icon-weather {
      height: 5vh;
    }

    .header-block {
      display: flex;
      flex-direction: row;
      justify-content: space-between;
      padding: 10px;
      align-items: center;
    }
    .header-block-left {
      width: 40px;
      height: 40px;
      background-color: white;
      border-radius: 50%;
      display: flex;
      flex-direction: column;
      align-items: center;
      justify-content: center;
    }
    .header-block-right {
      padding: 10px;
      border-radius: 20px;
      display: flex;
      flex-direction: initial;
    }
  </style>
  <div class="bg-image"></div>

  <ion-content style="height: 100%">
    <div class="header-block">
      <div>
        <div class="header-block-left" ng-click="goBack()">
          <i class="ico ion-chevron-left"></i>
        </div>
      </div>
      <div>
        <div class="card header-block-right" ng-click="modalShow()">
          <i class="icon ion-pin" style="margin-right: 10px"></i>พื้นที่ :
          {{farmSelected.farm_name}}
        </div>
      </div>
    </div>

    <div ng-if="vm.temp">
      <div
        class="card"
        style="
          background: transparent;
          border: none;
          box-shadow: none;
          color: white;
        "
      >
        <div style="color: white; position: relative; text-align: center">
          <label style="font-size: 24px"> {{vm.temp.name}} </label>
        </div>
        <div style="margin-bottom: 20px" ng-if="vm.temp">
          <div
            style="display: flex; flex-direction: column; align-items: center"
          >
            <label style="text-align: center; font-size: small"
              >{{vm.temp.weather[0].description}}</label
            >
          </div>
        </div>
        <div style="align-self: center" ng-if="vm.temp.main.temp">
          <label style="font-size: 64px">
            {{vm.temp.main.temps}}
            <span style="font-size: 20pt; position: absolute">°C</span>
          </label>
        </div>
      </div>

      <div style="font-size: large; margin: 25px; color: white">{{vm.day}}</div>

      <ion-scroll direction="x" style="width: 100%">
        <style>
          .house {
            display: flex;
            flex-direction: column;
            align-items: center;
            width: 70px;
          }

          .houseActive {
            display: flex;
            flex-direction: column;
            align-items: center;
            width: 70px;
          }

          .scroll-bar-h .scroll-bar-indicator {
            opacity: 0%;
          }
        </style>
        <div>
          <div style="display: flex; display: flex; color: white">
            <div
              ng-if="vm.forcase"
              ng-repeat="x in  vm.forcase.list | limitTo:10"
            >
              <div ng-class="x.sys.pod == 'd' ? 'house' : 'houseActive'">
                <label style="text-align: center">{{x.main.temps}} °</label>
                <img
                  ng-src="http://openweathermap.org/img/w/{{x.weather[0].icon}}.png"
                  style="height: 50px; width: 50px"
                />
                <label style="text-align: center">{{x.time}}</label>
              </div>
            </div>
          </div>
        </div>
      </ion-scroll>

      <div class="list" style="color: white">
        <div
          class="row"
          style="padding: 10px 0px 10px 0px; align-items: center"
        >
          <div class="col-4">
            <i><img class="icon-weather" src="img/weather/wind_1.png" /></i>
          </div>

          <div class="col-4" style="font-size: medium">ความเร็วลม</div>

          <div class="col-4" style="text-align: right; font-size: medium">
            {{vm.temp.wind.speed}} m/s
          </div>
        </div>

        <div
          class="row"
          style="padding: 10px 0px 10px 0px; align-items: center"
        >
          <div class="col-4">
            <i><img class="icon-weather" src="img/weather/hum_1.png" /></i>
          </div>

          <div class="col-4" style="font-size: medium">ความชื้น</div>

          <div class="col-4" style="text-align: right; font-size: medium">
            {{vm.temp.main.humidity}} %
          </div>
        </div>

        <div
          class="row"
          style="padding: 10px 0px 10px 0px; align-items: center"
        >
          <div class="col-4">
            <i><img class="icon-weather" src="img/weather/pres_1.png" /></i>
          </div>

          <div class="col-4" style="font-size: medium">ตวามดัน</div>

          <div class="col-4" style="text-align: right; font-size: medium">
            {{vm.temp.main.pressure | number}} hpa
          </div>
        </div>
      </div>

      <div class="list">
        <div
          class="item item-icon-right"
          style="background: transparent; color: white"
          ng-click="vm.DailyForecastgo('1','ข่าวเตือนภัยสภาพอากาศ')"
        >
          แจ้งเตือนสภาพอากาศ
          <i class="icon ion-ios-arrow-right"></i>
        </div>
        <div
          class="item item-icon-right"
          style="background: transparent; color: white"
          ng-click="vm.DailyForecastgo('3','พยากรอากาศ 24 ชั่วโมง')"
        >
          พยากรอากาศ 24 ชั่วโมง
          <i class="icon ion-ios-arrow-right"></i>
        </div>
      </div>
    </div>

    <br />

    <script id="my-farm.html" type="text/ng-template">
      <ion-modal-view>
          <ion-header-bar>
              <button type="button" class="button button-assertive button-clear" ng-click="closeModal()">ปิด</button>
            <h1 class="title" style="text-align:center">เลือกพื้นที่</h1>

          </ion-header-bar>
          <ion-content>
            <div class="item item-avatar" ng-repeat="x in data.result" ng-if="status == true"      ng-click="selectFarm(x)">
              <img ng-if="x.imgpath" ng-src="{{x.imgpath}}" style="object-fit: contain;">
              <img ng-if="!x.imgpath" src="img/noimage1.jpg">

              <div style="    white-space: initial;
              overflow: hidden;
              text-overflow: ellipsis;">

                <div style="display: flex;
                justify-content: space-between;">
                  <a style="    font-weight: bold;
                  font-size: large;">
                    {{x.farm_name}}

                  </a>


                  <a ng-if="x.farm_status == 'APPROVE'" style="color:green"><i class="icon ion-checkmark-circled"></i> อนุมัติ</a>
                  <a ng-if="x.farm_status == 'REJECT'" style="color:red"><i class="icon ion-close-circled"></i> ไม่อนุมัติ</a>
                  <a ng-if="x.farm_status == 'INACTIVE'" style="color:red">ยกเลิกใช้งาน</a>


                  <a ng-if="!x.farm_status" > รออนุมัติ</a>


                </div>
              <p style="white-space: break-spaces;">{{x.address}}</p>

                <p><b>{{x.createname.mob_fname}} {{x.createname.mob_lname}}</b></p>
                <div style="margin-top: -3px;display: flex;
                align-items: baseline;
                justify-content: space-between;">
                  <a>
                    <img
                    ng-src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAAABHNCSVQICAgIfAhkiAAAAAlwSFlzAAACkwAAApMBv+Bu1wAAABl0RVh0U29mdHdhcmUAd3d3Lmlua3NjYXBlLm9yZ5vuPBoAAAM3SURBVFiF7ZRPaBxlGMZ/78SZrO5poZWSghcv9V8l9mKgl5I29dJAhaWpSLtWZ3YM5BB6KT0NqD1oacC97M4EOtBioxE8iNJWaKEqIvgHtAaR3izElhIKweruZOf1kEmZbnayI25P5r18M9/7fM/zfO/3fh9sxv895N8uKJfLVqlUeg14A3gymb4hIrOqetb3/eihGXBdd3scx58Cw13JRL5X1QO+7y/m5TTyAiuVSiGO488T8d+Ag8BWYKuqvgzcUNVdwGflctnKy/tIXqBlWW8CO4FfW63WSBiGd1PpTyqVylXLsr4Fhkulkgu8n4c3dwWAVwBE5EQiLrZtT1Sr1UOAhGF4V1VPpLH9NrADIIqiKwCO4xwWkQuqOmfb9qHE3JUE+9TDMNAEKBQKRQBVvd/AhmEIwMrKSjGN7beBHwHa7fY4QBAEH6jqYRGZaDQacwCmaY4DiMgPeUlzNyFwHtgLOEAAaBAEc6m8qKqdwuaK3BUoFosfAbdVdZdt2wc689VqdRx4Afij2Wx+3HcDMzMzfwGnAUTklOd599d6nmeo6jvJ7+kwDP/Oy5v5EjqOcxPYnrlw9ew/BLBte0JELmyg87vv+0/kNuA4znPATxsQAtyJouhpANM0F4AtG4FV9dkgCH7pnM9qwtFkPOf7/pF0wvM8Y3Fx8WtVfdE0zVPJddwCfDM0NLTb87y4YzPngFdFZBRYZyCrB8YS1190JjzPi0XEBlrA6yJyDGipqt0pDiAiaxxj3YTWGZienn4U2APowMDApW6L6vX6deBtVo9QROStbuUFaLfblwAF9kxNTQ32NLC8vDwCFICf6/X67W6kAIODg+8CC8CCZVnvZeFmZ2dvAdeBx6IoGulpwDCMfaxu63IWKUCtVmuKyNE4jo/UarVeT+9lAFVddwzdmvClZLzYg5RGo/FdL0wifFFEjqvqfuBkOvdABSYnJ7cBzwN/Li0tfZmHPE9EUfQVcA8Ydl338UwDURSNstpY1+bn51v9MpC8jNcAieN4b6YBEdmXfK67fv811q5jSgN4sAcE2J98n3Ec50w/Dajq2jiWaCmkKuC67jPAtn6KZsRQorUZmwHAPylaJT32wwBUAAAAAElFTkSuQmCC"
                    style="
                    top: 3px;
                    position: relative;
                    height: 20px;
                    width: 20px;
                    ">
                    <span ng-if="x.farm_area_farm">{{x.farm_area_farm |number}} ไร่</span>
                    <span ng-if="x.farm_area_work">{{x.farm_area_work |number}} งาน</span>
                    <span ng-if="x.farm_area_wah">{{x.farm_area_wah |number}} ตารางวา</span>
                  </a>

                <button class="button button-small  button-positive"
                 ng-click="selectFarm(x)"

                 style="font-weight: bold;" > เลือกพื้นที่ </button>

                </div>

              </div>

              <div >
                <img ng-src="{{k.standardicon}}" style="    width: 25px;
                height: 25px;" ng-repeat="k in x.standard">
              </div>
            </li>

            <h3 style="text-align: center;color:gray;margin-top:20%" ng-if="data.status == false && status == true">ยังไม่ได้สร้างพื้นที่ </h3>
            <h3 ng-click="vm.refresh()" style="text-align: center;color:gray;margin-top:20%" ng-if="status == false">เกิดข้อผิดพลาดในการเชื่อมต่อลองใหม่อีกครั้ง
            <i class="icon ion-refresh"></i>
            </h3>

            <div ng-if="!data" style="margin-top:20% ">
              <ion-spinner icon="spiral" class="spinner-dark"
                style="position: absolute; zoom:2;display: inline-block;left:45%"></ion-spinner>
            </div>


          </div>

          </ion-content>
        </ion-modal-view>
    </script>
  </ion-content>
</ion-view>
