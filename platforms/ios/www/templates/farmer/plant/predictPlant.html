<ion-view hide-back-button="false" cache-view="true">
  <ion-nav-title> คาดการณ์เก็บเกี่ยว </ion-nav-title>

  <ion-content style="" scroll="false">
    <style>
      .scroll {
        height: 100%;
      }
    </style>

    <ion-scroll
      class="scrollable"
      direction="y"
      style="height: calc(100% - 0%);position: relative;"
    
    >
    <!-- ng-if="vm.status" -->
      <div
        class=" list"
        style=" box-shadow: 0 0.1px 3px rgba(0, 0, 0, 0.4);"
      >
        <div class="item" style="padding: 0;">
          <aa class="item item-button-right">
            <div ng-if="!cropSelect" style="color:black">เลือกรุ่นเพาะปลูก</div>
            <div ng-if="cropSelect" style="color:black">รุ่นการเพาะปลูก : <a>{{cropSelect.crop_code}}</a></div>

            <div ng-if="!cropSelect" style="color:red;font-size: medium;">Please select Crop <i class="icon ion-information-circled"></i></div>
            <div  ng-if="cropSelect" style="color:gray;font-size: medium;">{{cropSelect.vdad_addr}} {{cropSelect.vdad_name}}</div>
            <div ng-if="cropSelect" style="color:gray;font-size: medium;">พันธุ์ : {{cropSelect.wo_part}}</div>
            

            <button class="button button-positive" style="margin-top: 4%;" ng-click="openModalListcrop()">
              <i class="icon ion-compose"></i>
            </button>
          </a>

          <!-- <div layout="column" layout-align="center center">

            <md-select placeholder="รุ่นการเพาะปลูก" ng-model="model.sub" ng-change="vm.subChange(model.sub)" style="width: 95%;">
              <md-option ng-value="k" ng-repeat="k in dataCropwo"> Crop : {{k.crop_code}} Collector : {{k.vdad_addr}} Description : {{x.vdad_name}}
                </md-option>
            </md-select>

          </div> -->
        </div>

        <div
          class="card"
          style="height:120px;display: flex;margin:10px;
        flex-flow: row wrap;"
          ng-click="vm.listmap()"
        >
          <div
            style="height: 100%;
       width: 30%;"
          >
     
            <div id="mapbbb" class="map_list"></div>
          </div>

          <div
            style="height: 100%; width: 70%;display: flex;
  flex-direction: column;
  justify-content: center;
  align-items: center;"
          >
            <div
              style="font-weight:bold;font-weight: bold;
  font-size: 18px;text-align:center"
            >
              พื้นที่ {{subDetail.farm_name}} แปลงที่ {{subDetail.sup_sub_id}}
            </div>
            <div>
              {{subDetail.sub_area_farm}} ไร่ {{subDetail.sub_area_work}} งาน
              {{subDetail.sub_area_wah}} ตารางวา
            </div>
            <div
              style="    text-align: center;
              padding: 5px;"
            >
              บ้านเลขที่ {{subDetail.farm_village_no}} แขวง
              {{subDetail.farm_district}} เขต {{subDetail.farm_amphur}} จังหวัด
              {{subDetail.farm_province}}
            </div>
          </div>
        </div>

        <a class="item item-button-right">
          <div>วันที่คาดการณ์</div>

          <div ng-if="!model.date1" style="color:red;font-size: medium;">เลือกวันที่คาดการณ์ <i class="icon ion-information-circled"></i></div>
          <div ng-if="model.date1" style="color:gray;font-size: medium;">{{model.date1}}</div>

          

          <button class="button button-positive" style="margin-top: 4%;" ng-click="vm.pickdate1()">
            <i class="icon ion-calendar"></i>
          </button>
        </a>




        <a class="item item-button-right">
          <div >คาดการณ์วันเก็บจริง</div>

          <div ng-if="!model.date2" style="color:red;font-size: medium;">เลือกวันที่คาดการณ์ <i class="icon ion-information-circled"></i></div>
          <div ng-if="model.date2" style="color:gray;font-size: medium;">{{model.date2}}</div>

          

          <button class="button button-positive" style="margin-top: 4%;" ng-click="vm.pickdate2()">
            <i class="icon ion-calendar"></i>
          </button>
        </a>
      </div>
      <div class="item item-divider item-button-right" style="height: 50px;
      display: flex;
      align-items: center;">
        <div>คาดการณ์เก็บเกี่ยว</div>
        <button class="button button-positive"  ng-click="openModaldataPredict()">
          <i class="icon ion-plus-round"></i>
        </button>
      </div>

        <div class="item item-button-right" ng-repeat="x in datapredict">
          <div style="color:black">ลำดับที่ {{$index+1}}</div>

          <div><a style="color:black">จำนวนไร่ : </a>  <a  >{{x.rai}}</a>   <a style="color:black">ผลผลิต : </a> <a>{{x.result}}</a></div>
          <div ><a style="color:black">วันที่เพาะปลูก : </a>  <a  >{{x.datestart}}</a> </div>
          <div ><a style="color:black"> <a style="color:black">จำนวนวันที่เพาะปลูก : </a> <a>{{x.countdate}}</a></div>
          <div ><a style="color:black">หมายเหตุ : </a>  <a  >{{x.remark}}</a>  </div>



          

          <button class="button button-energized" style="margin-top: 4%;" ng-click="vm.edit(x,$index)">
            <i class="icon ion-edit"></i>
          </button>
          <button class="button button-assertive" style="margin-top: 20%;" ng-click="vm.delete($index)">
            <i class="icon ion-trash-a"></i>
          </button>
        </div>
        
        <div ng-if="datapredict.length == 0" style="text-align: center;margin-top:20px;font-size: larger;" > ไม่มีรายการ</div>

        <div style="padding: 10px;">
          <button class="button button-positive button-block" ng-click="vm.save()">
            <i class="icon ion-edit"></i>
            Save
          </button>
        </div>
      
    </ion-scroll>

    <div
      style="text-align: center;font-size: large;    margin-top: 20px;"
      ng-if="!vm.status"
    >
      ไม่มีรายการพื้นที่
    </div>
  </ion-content>

  <script id="list_map.html" type="text/ng-template">
    <ion-modal-view>
      <ion-header-bar style="text-align:center;background:white">

        <h1 class="title" >รายการแปลง</h1>
        <button type="button" class="button button-assertive button-clear " ng-click="closeModalListmap()">Close</button>
      </ion-header-bar>
      <ion-content  style="background:#f5f5f5">

        <div class="card" style="height:110px;display: flex;
        flex-flow: row wrap;" ng-repeat="k in subfarm" ng-click="vm.selectSubBefore(k,$index)">

      <div style="height: 100%;
                width: 30%;">
        <!-- <img style="height: 100%;
                        width: 100%;
                        padding: 4px;
                        max-width:200px;" src=""> -->
                        <div id="{{$index}}" class="map_list"></div>
      </div>

      <div style="height: 100%; width: 70%;display: flex;
      flex-direction: column;
      justify-content: center;
      align-items: center;" >

        <div style="font-weight:bold;font-weight: bold;
        font-size: 18px;">พื้นที่ {{k.farm_name}} แปลงที่ {{k.sup_sub_id}}</div>
        <div> {{k.sub_area_farm}} ไร่ {{k.sub_area_work}} งาน {{k.sub_area_wah}} ตารางวา</div>
        <div style="    text-align: center;
        padding: 5px;">บ้านเลขที่ {{k.farm_village_no}} แขวง {{k.farm_district}} เขต {{k.farm_amphur}} จังหวัด {{k.farm_province}}</div>



      </div>

    </div>

      </ion-content>
    </ion-modal-view>
  </script>

  <script id="list_Crop.html" type="text/ng-template">
    <ion-modal-view>
      <ion-header-bar style="text-align:center;background:white">

        <h1 class="title" >รายการแปลง</h1>
        <button type="button" class="button button-assertive button-clear " ng-click="closeModalListcrop()">Close</button>
      </ion-header-bar>
      <ion-content  style="">
        <div class="list">

          <div class="item item-button-right"  ng-repeat="k in dataCropwo"> 
            <div>
              <a style="color:black">
                Crop : 
              </a>
              <a>
              {{k.crop_code}}

              </a>
            </div>

            <div>
              <a style="color:black">
                Collector :
              </a>
              <a>
                {{k.vdad_addr}}

              </a>
              <a style="color:black">
                Description :
              </a>
              <a>
                {{k.vdad_name}}

              </a>


            </div>


            <button class="button button-positive" ng-click="vm.selectCrop(k,$index)">
              <i class="icon ion-chevron-right"></i>
            </button>
          </div>
        
        
        </div>



      </ion-content>
    </ion-modal-view>
  </script>

  <script id="data_predict.html" type="text/ng-template">
    <ion-modal-view>
      <ion-header-bar style="text-align:center;background:white">

        <h1 class="title" >คาดการ์เก็บเกี่ยว</h1>
        <button type="button" class="button button-assertive button-clear " ng-click="closeModaldataPredict()">Close</button>
      </ion-header-bar>
      <ion-content  style="">
        <style>
            .modal-open{
                  pointer-events: all;
                }
        </style>
        <div class="list">
          <label class="item item-input item-stacked-label">
            <span class="input-label">จำนวนไร่</span>
            <input type="number" placeholder="จำนวนไร่" ng-model="modelpredict.rai">
          </label>
          <label class="item item-input item-stacked-label">
            <span class="input-label">ผลผลิต</span>
            <input type="number" placeholder="ผลผลิต" ng-model="modelpredict.result">
          </label>
      
          <a class="item item-button-right">
            <div>วันที่เพาะปลูก</div>
  
            <div ng-if="!modelpredict.datestart" style="color:gray;font-size: medium;">เลือกวันที่เพาะปลูก</div>
            <div ng-if="modelpredict.datestart" style="color:gray;font-size: medium;">{{modelpredict.datestart}}</div>
  
            
  
            <button class="button button-positive" style="margin-top: 4%;" ng-click="vm.pickdate3(modelpredict)">
              <i class="icon ion-calendar"></i>
            </button>
          </a>
          <label class="item item-input item-stacked-label">
            <span class="input-label">จำนวนวันที่เพาะปลูก</span>
            <input type="number" placeholder="วันที่ปลูก" ng-model="modelpredict.countdate">
          </label>
          <label class="item item-input item-stacked-label">
            <span class="input-label">หมายเหตุ</span>
            <input type="text" placeholder="หมายเหตุ" maxlength="100" ng-model="modelpredict.remark">
          </label>

          <div>
          <button class="button button-positive button-block" ng-click="vm.add()">
            <i class="icon ion-plus-round"></i>
            Add
          </button>
        </div>
        </div>



      </ion-content>
    </ion-modal-view>
  </script>

  <script id="edit_predict.html" type="text/ng-template">
    <ion-modal-view>
      <ion-header-bar style="text-align:center;background:white">

        <h1 class="title" >คาดการ์เก็บเกี่ยว</h1>
        <button type="button" class="button button-assertive button-clear " ng-click="closeModalEditPredict()">Close</button>
      </ion-header-bar>
      <ion-content  style="">
        <style>
            .modal-open{
                  pointer-events: all;
                }
        </style>
        <div class="list">
          <label class="item item-input item-stacked-label">
            <span class="input-label">จำนวนไร่</span>
            <input type="number" placeholder="จำนวนไร่" ng-model="modelEditpredict.rai">
          </label>
          <label class="item item-input item-stacked-label">
            <span class="input-label">ผลผลิต</span>
            <input type="number" placeholder="ผลผลิต" ng-model="modelEditpredict.result">
          </label>
          <a class="item item-button-right">
            <div>วันที่เพาะปลูก</div>
  
            <div ng-if="!modelEditpredict.datestart" style="color:gray;font-size: medium;">เลือกวันที่เพาะปลูก</div>
            <div ng-if="modelEditpredict.datestart" style="color:gray;font-size: medium;">{{modelEditpredict.datestart}}</div>
  
            
  
            <button class="button button-positive" style="margin-top: 4%;" ng-click="vm.pickdate3(modelEditpredict)">
              <i class="icon ion-calendar"></i>
            </button>
          </a>
          <label class="item item-input item-stacked-label">
            <span class="input-label">จำนวนวันที่เพาะปลูก</span>
            <input type="number" placeholder="วันที่ปลูก" ng-model="modelEditpredict.countdate">
          </label>
          <label class="item item-input item-stacked-label">
            <span class="input-label">หมายเหตุ</span>
            <input type="text" placeholder="หมายเหตุ" maxlength="100" ng-model="modelEditpredict.remark">
          </label>

          <div>
          <button class="button button-positive button-block" ng-click="vm.update()">
            <i class="icon ion-edit"></i>
            Update
          </button>
        </div>
        </div>



      </ion-content>
    </ion-modal-view>
  </script>
</ion-view>
