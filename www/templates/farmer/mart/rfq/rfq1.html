<ion-view cache-view="false" class="MyFont">


  <ion-nav-title><b style="font-size: 18px;">Details</b> </ion-nav-title>
  <ion-nav-buttons side="right">


    <!-- <button
        class="button button-clear icon ion-clipboard"
        style="color: white;"
        ng-click="vm.hist()"
      ></button> -->
  </ion-nav-buttons>
  <!-- style="background:#f5f5f5" -->
  <style>
    /* .lis .card {
      margin: 2px;
    } */

    .dp-flex {
      display: flex;
      justify-content: space-between;
    }

    .scroll {
      height: 100%;
    }

    .kk .spinner svg {
      width: 100px;
      height: 50px;
    }

  </style>
  <ion-content style="background-color:#F5F5F5;">

    <div class="card" style="border-radius: 5px;">

      <div class="item item-text-wrap">
        <div style="font-weight: bold;font-size: large;margin-bottom: 20px;">
          ข้อมูลเอกสาร
        </div>

        <i class="icon ion-ios-paper-outline" style="font-size: 20px;"></i>

        <span style="font-weight: bold;">เลขที่เอกสาร</span> : <span style="color:gray"> {{ vm.data.rfq_nbr}}</span>

      </div>

      <div class="item item-text-wrap">
        <i class="icon ion-ios-calendar-outline" style="font-size: 20px;"></i>
        <span style="font-weight: bold;">วันที่</span> : <span style="color:gray">{{vm.data.rfq_date}}</span>
      </div>

      <div class="item item-text-wrap">
        <i class="icon ion-ios-person-outline" style="font-size: 20px;"></i>
        <span style="font-weight: bold;">ผู้ขอ</span> : <span style="color:gray">{{vm.data.mart_title}}
          {{vm.data.mart_name}}</span>
      </div>

      <div class="item item-text-wrap">
        <i class="icon ion-ios-location-outline" style="font-size: 20px;"></i>

        <span style="font-weight: bold;">ที่อยู่</span> : <span style="color:gray;line-height: normal;">
          {{vm.data.mart_line1}} {{vm.data.mart_line2}}</span>


      </div>

      <div class="item item-text-wrap">
        <i class="icon ion-ios-telephone-outline" style="font-size: 20px;"></i>

        <span style="font-weight: bold;">เบอร์โทรศัพท์</span> : <span style="color:gray">
          {{vm.data.mart_phone}}</span>


      </div>
    </div>


    <div class="card" style="border-radius: 5px;">
      <div class="item item-text-wrap">
        <div style="font-weight: bold;font-size: large;margin-bottom: 20px;">
          ข้อมูลสินค้า
        </div>
        <div>


          <span style="color:gray;font-size:xx-large;">{{ vm.data.pt_desc1}}</span>

        </div>


      </div>

      <div class="item item-text-wrap">
        <div style="display: flex;flex-direction: row;justify-content: space-between;">
          <div>

            <span style="font-weight: bold;">จำนวน</span> :
            <span style="color:gray">{{ vm.data.rfqd_quanity | number}}</span>
          </div>

          <div>

            <span style="font-weight: bold;">หน่วย</span> :
            <span style="color:gray">{{ vm.data.rfqd_unit }}</span>
          </div>

        </div>


        <div>

          <span style="font-weight: bold;">ราคา / หน่วย</span> :
          <span style="color:gray">{{ vm.data.rfqd_price | number}} บาท</span>
        </div>

        <div>

          <span style="font-weight: bold;">รวมมูลค่า</span> :
          <span style="color:gray">{{ vm.data.rfqd_price * vm.data.rfqd_quanity | number}} บาท</span>
        </div>
      </div>

      <div class="item item-text-wrap">

        <div>

          <span style="font-weight: bold;">วันที่ส่ง</span> :
          <span style="color:gray">{{ vm.data.rfq_ship_date}}</span>
        </div>

        <div>

          <span style="font-weight: bold;">เงื่อนไข</span> :
          <span style="color:gray">{{ vm.data.rfq_ct_code}}</span>
        </div>


      </div>



    </div>




    <!-- <div class="list">
      <div class="item item-divider">
        รายละเอียด
      </div>
      <div class="item" style="margin-bottom: 10px;">


        <div style="display: flex; justify-content: space-between;">
          <a><span style="font-weight: bold;">เลขที่เอกสาร :</span> {{ vm.data.rfq_nbr}}</a>
        </div>

        <div style="display: flex; justify-content: space-between;">
          <a><span style="font-weight: bold;">ผู้ขอ : </span>{{vm.data.mart_title}} {{ vm.data.mart_name}}</a>
        </div>


        <div class="dp-flex">
          <a><span style="font-weight: bold;">ที่อยู่ :</span> {{vm.data.mart_line1}} {{vm.data.mart_line2}}</a>
        </div>

        <div class="dp-flex">
          <a><span style="font-weight: bold;">เบอร์โทรศัพท์ :</span> {{vm.data.mart_phone}}</a>
        </div>




      </div>
    </div>

    <div class="list">
      <div class="item item-divider">
        สินค้า
      </div>
      <div class="item" style="margin-bottom: 10px;">




        <div style="display: flex; justify-content: space-between;">
          <a><span style="font-weight:bold">ชื่อสินค้า :</span> : {{ vm.data.pt_desc1}}</a>
          <a></a>
        </div>


        <div class="dp-flex">
          <a><span style="font-weight:bold">จำนวน :</span> : {{ vm.data.rfqd_quanity}}</a>
        </div>

        <div class="dp-flex">
          <a><span style="font-weight:bold">หน่วย :</span> : {{ vm.data.rfqd_unit}}</a>
        </div>
        <div class="dp-flex">
          <a><span style="font-weight:bold">ราคา :</span> <span> {{ vm.data.rfqd_price}} บาท </span></a>
        </div>
        <div class="dp-flex">
          <a><span style="font-weight:bold">วันที่ส่ง :</span> : {{vm.data.rfq_ship_date}}</a>
        </div>
        <div class="dp-flex">
          <a><span style="font-weight:bold">เงื่อนไข :</span> : {{vm.data.rfq_ct_code}}</a>
        </div>





      </div>
    </div> -->


    <div class="list">
      <label class="item item-input">
        <span class="input-label">จำนวนที่เสนอ</span>
        <input style="text-align:right" type="text" ng-model="model.qty"
          oninput="this.value=this.value.replace(/[^0-9]/g,'');" placeholder="จำนวน">
      </label>
      <label class="item item-input">
        <span class="input-label" ng-model="model.price">ราคาที่เสนอ</span>
        <input style="text-align:right" type="text" ng-model="model.price"
          oninput="this.value=this.value.replace(/[^0-9]/g,'');" placeholder="ป้อนราคาที่เสนอต่อหน่วย">
      </label>
      <div class="item item-text-wrap" style="margin-top: 10px;">

        <div class="dp-flex">

          <span style="font-weight: bold;">รวมมูลค่า</span> 
          <span style="font-weight: bold;text-align: right;">{{model.price * model.qty | number}} บาท</span>
        </div>


      </div>

      
    </div>

    <div style="padding:10px">
      <button type="button" class="button button-balanced button-block" ng-click="rfqSubmit()">
        ยื่นข้อเสนอ
      </button>
    </div>


    <div style="
          align-items: center;
          justify-content: center;
          display: flex;
          min-height: 80%;
        ">
      <div ng-if="vm.list.status == false" style="text-align: center; height: 100%;">
        <h2 style="color: gray;">ไม่มีรายการที่ต้องจัดส่ง</h2>
      </div>
    </div>

    <script id="my-detail.html" type="text/ng-template">
      <ion-modal-view>
                        <ion-header-bar>
                            <button type="button" class="button button-assertive button-clear" ng-click="closeModalDetail()">close</button>
                          <h1 class="title" style="text-align:center">{{vm.detail.datedesc}} {{vm.detail.time}}</h1>
                          <!-- <button type="button" class="button button-positive button-clear" ng-click="closeModalItem()">เลือกทั้งหมด</button> -->
  
                        </ion-header-bar>
                        <ion-content style="background-color: #fafafa">
                          <style>
                                  .modal-open{
                                    pointer-events: all;
                                  }
                          </style>
                          <div class="alert alert-success" role="alert" >
                            <i style="color:green" class="icon ion-checkmark-circled"> </i> {{vm.detail.ml_status_desc}}
                          </div>
  
        <div class="item">
          <!-- <div class="dp-flex">
            <a>สถานะ</a><a><span ng-if="vm.detail.mim_status == 'CONFIRM'"> <i style="color:green" class="icon ion-checkmark-circled"></i></span> {{vm.detail.ml_status_desc}}</a>
          </div> -->
          <div class="dp-flex"><a>เลขที่ใบสั่งซื้อ</a><a>{{vm.detail.mim_ref}}</a></div>
          <div class="dp-flex">
            <a>ชื้่อผู้ซื้อ</a
            ><a>{{vm.detail.muname}}</a>
          </div>
          <div class="dp-flex">
            <a>เบอร์โทรศัพท์</a><a>{{vm.detail.mu_tel}} </a>
          </div>
  
        </div>
  
        <div class="item" style="margin-top: 10px;">
          <div class="dp-flex">
            <a style="font-weight: bold; font-size: larger;">ข้อมูลการจัดส่ง</a><a></a>
          </div>
          <div class="dp-flex">
            <a>ชื่อผู้รับ</a
            ><a>{{vm.detail.mim_name}}</a>
          </div>
          <div class="dp-flex">
            <a>เบอร์โทรศัพท์</a><a>{{vm.detail.mim_tel}} </a>
          </div>
          <div class="dp-flex">
            <a>ที่อยู่</a
            ><a
              style="
                width: 80%;
                white-space: nowrap;
                overflow: hidden;
                text-overflow: ellipsis;
                text-align: right;
              "
              >{{vm.detail.mim_address}}</a
            >
          </div>
  
          <div class="dp-flex">
            <a>จัดส่งโดย</a><a>{{vm.detail.logis_name}} </a>
          </div>
        </div>
  
        <div class="item" style="margin-top: 10px;">
          <div class="dp-flex">
            <a style="font-weight: bold; font-size: larger;">รายการ</a><a></a>
          </div>
  
          <div   class="dp-flex" style="margin-bottom: 10px;padding-bottom: 10px; border-bottom: solid 1.5pt #fafafa;" ng-repeat="k in vm.detail.detail" ng-click="vm.clickDetail(k)">
  
            <a style="flex:6"  href="">
              <div>{{k.ml_part_desc}}
  
              </div>
              <div style="color: gray;">{{k.ml_serial}}</div>
       
            </a>
  
       
            <a >{{k.ml_price | number}} </a>
          </div>
  
  
        </div>
  
  
        <div class="item" style="margin-top: 10px;">
          <div class="dp-flex"><a>ค่าสินค้า</a><a>{{ getTotal().totalitem | number}}</a></div>
          <div class="dp-flex"><a>ค่าจัดส่ง</a>
            <a ng-if="vm.detail.mid_delivery == 'FREE'">{{vm.detail.mid_delivery}}</a>
            <a ng-if="vm.detail.mid_delivery != 'FREE'">{{vm.detail.mid_ship_prc | number}}</a>
  
        
        </div>
        </div>
        <div class="item">
          <div class="dp-flex" style="font-weight: bold;">
            <a>รวมทั้งหมด</a><a style="color:green">{{ getTotal().totalall | currency : value="฿ " }}</a>
          </div>
        </div>
  
      <div style="height:100px"></div>
  
                        </ion-content>
                        <!-- <div style="position: absolute; bottom: 0px; width: 100%; background: white;">
                          <div style="text-align: center; padding-left: 10px; padding-right: 10px;display: flex;">
                            <button
                              type="button"
                              class="button button-balanced button-block "
                              ng-click="vm.approve()" style="margin: 5px;"
                              ng-hide="vm.detail.mim_status != 'CONFIRM'"
                            >
                              <i class="icon ion-paper-airplane"></i>&nbsp;&nbsp;จัดส่ง
                            </button>
  
                            <button
                            type="button"
                            class="button button-assertive button-block"
                            ng-click="vm.reject()" style="margin: 5px;"
                          ng-hide="vm.detail.mim_status == 'CONFIRM'">
                              ยกเลิกคำสั่งซื้อ
                          </button>
                        </div>
                          </div>
                        </div> -->
                      </ion-modal-view>
      </script>
  </ion-content>
</ion-view>
