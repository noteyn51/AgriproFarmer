<ion-view hide-back-button="false" cache-view="false">

  </ion-nav-buttons>

  <ion-nav-title><b style="font-size: 18px;">ประวัติการบันทึก</b>
  </ion-nav-title>
  <ion-nav-buttons side="right">

    </button>
  </ion-nav-buttons>
  <!-- style="background:#f5f5f5" -->
  <style>
    .lis .card {
      margin: 2px;
    }

    .dp-flex {
      display: flex;
      justify-content: space-between;
    }

    .scroll {
      height: 100%;
    }

  </style>
  <ion-content style=" background-color: #fafafa;">
    <div class="list">
      <div class="item" style="margin-bottom: 10px;    white-space: inherit;" ng-click="openModalHist(x)"
        ng-repeat="x in vm.historyList.result track by $index">
        <div style="display: flex; justify-content: space-between;">
          {{x.wo_nbr}} - {{x.pt_desc1}} <a>เลขที่ใบสั่งปลูก :&nbsp;{{x.wo_lot}}</a>
        </div>

        <div style="display: flex; justify-content: space-between;">
          <a>พื้นที่ : {{x.farm_name}}</a>
          <a>
            <span ng-if="x.mim_status == 'CONFIRM'"><i style="color:green"
                class="icon ion-checkmark-circled"></i></span>
            {{x.ml_status_desc}}</a>
        </div>
        <!-- <h2>{{x.subdatedesc}}</h2> -->

        <!-- <div ng-style="x.ml_status_desc == 'ชำระเงินแล้ว' ?  {'background-color':'green'} : {'background-color': 'yellow'}" style="width:200px;height:100px;border:1px solid gray;"></div> -->
        <div class="dp-flex">
          <a>วันที่บันทึกล่าสุด : {{x.subdatedesc}} {{x.lasttime}}</a>
        </div>
      </div>

    </div>



    <!-- <div class="list card" style="margin: 10px 10px; height:auto "
      ng-repeat="x in  vm.historyDetail.result track by $index">

      <div class="item " style="border-left: solid 3pt green;" ng-click="showhide(x)">

        <div class="dp-flex" style="align-items: center;"><a style="font-size: large;">บันทึกกิจกรรมการเพาะปลูก</a>
          <a style="font-size: x-large;">
            <i class="icon ion-arrow-down-b" ng-if="x.check == true"></i>
            <i class="icon ion-arrow-right-b" ng-if="x.check == false"></i>
          </a>

        </div>

        <div>{{x.subdatedesc}} {{x.times}}</div>
      </div>

      <div class="item item-body" ng-if="x.check">

        <div ng-repeat="k in x.detail">
          <div class="dp-flex"><a>{{k.op__qad01}}</a><a>{{k.op__qad04 ? k.op__qad04 +' นาที':'-'}}</a></div>
        </div>



        <div class="alert alert-secondary">
          <div>
            <h2>สภาพแวดล้อม</h2>
          </div>
          <div style="
          display: flex;
          justify-content: space-around;
          margin-top: 20px;
        ">
            <div class="card" style="
            display: flex;
            flex-direction: column;
            align-items: center;
            border: none;
            box-shadow: none;
            background: transparent;
          ">
              <label style="text-align: center; margin-bottom: 5px;">อุณภูมิ</label>
              <img src="img/iconOP/1.png" style="height: 50px; width: 50px;" />
              <label style="text-align: center; margin-top: 10px;">{{x.detail[0].op__dec01 }} °C</label>
            </div>

            <div class="card" style="
            display: flex;
            flex-direction: column;
            align-items: center;
            border: none;
            box-shadow: none;
            background: transparent;
          ">
              <label style="text-align: center; margin-bottom: 5px;">ความชื้นในดิน</label>
              <img src="img/iconOP/2.png" style="height: 50px; width: 50px;" />
              <label style="text-align: center; margin-top: 10px;">{{x.detail[0].op__dec02}} %</label>
            </div>

            <div class="card" style="
            display: flex;
            flex-direction: column;
            align-items: center;
            border: none;
            box-shadow: none;
            background: transparent;
          ">
              <label style="text-align: center; margin-bottom: 5px;">ความชื้นอากาศ</label>
              <img src="img/iconOP/4.png" style="height: 50px; width: 50px;" />
              <label style="text-align: center; margin-top: 10px;">{{x.detail[0].op__log01}} %</label>
            </div>

            <div class="card" style="
            display: flex;
            flex-direction: column;
            align-items: center;
            border: none;
            box-shadow: none;
            background: transparent;
          ">
              <label style="text-align: center; margin-bottom: 5px;">ความเร็วลม</label>
              <img src="img/iconOP/3.png" style="height: 50px; width: 50px;" />
              <label style="text-align: center; margin-top: 10px;">{{x.detail[0].op__log01}} %</label>
            </div>
          </div>
        </div>


        <div class="alert alert-secondary">
          <div>
            <h2>ดิน</h2>
          </div>
          <div style="
        display: flex;
        justify-content: space-around;
        margin-top: 20px;
      ">
            <div class="card" style="
          display: flex;
          flex-direction: column;
          align-items: center;
          border: none;
          box-shadow: none;
          background: transparent;
        ">
              <label style="text-align: center; margin-bottom: 5px;">N</label>
              <img src="img/iconOP/npk.png" style="height: 50px; width: 50px;" />
              <label style="text-align: center; margin-top: 10px;">{{x.detail[0].op_soil_n }}</label>
            </div>

            <div class="card" style="
          display: flex;
          flex-direction: column;
          align-items: center;
          border: none;
          box-shadow: none;
          background: transparent;
        ">
              <label style="text-align: center; margin-bottom: 5px;">P</label>
              <img src="img/iconOP/npk.png" style="height: 50px; width: 50px;" />
              <label style="text-align: center; margin-top: 10px;">{{x.detail[0].op_soil_k}}</label>
            </div>

            <div class="card" style="
          display: flex;
          flex-direction: column;
          align-items: center;
          border: none;
          box-shadow: none;
          background: transparent;
        ">
              <label style="text-align: center; margin-bottom: 5px;">K</label>
              <img src="img/iconOP/npk.png" style="height: 50px; width: 50px;" />
              <label style="text-align: center; margin-top: 10px;">{{x.detail[0].op_soil_k}}</label>
            </div>

            <div class="card" style="
          display: flex;
          flex-direction: column;
          align-items: center;
          border: none;
          box-shadow: none;
          background: transparent;
        ">
              <label style="text-align: center; margin-bottom: 5px;">PH ในน้ำ</label>
              <img src="img/iconOP/ph.png" style="height: 50px; width: 50px;" />
              <label style="text-align: center; margin-top: 10px;">{{x.detail[0].op_soil_ph}}</label>
            </div>
          </div>
        </div>

        <div class="alert alert-secondary">
          <div>
            <h2>น้ำ</h2>
          </div>
          <div style="
      display: flex;
      justify-content: space-around;
      margin-top: 20px;
    ">
            <div class="card" style="
        display: flex;
        flex-direction: column;
        align-items: center;
        border: none;
        box-shadow: none;
        background: transparent;
      ">
              <label style="text-align: center; margin-bottom: 5px;">PH ในดิน</label>
              <img src="img/iconOP/ph.png" style="height: 50px; width: 50px;" />
              <label style="text-align: center; margin-top: 10px;">{{x.detail[0].op_water_ph}}</label>
            </div>

            <div class="card" style="
        display: flex;
        flex-direction: column;
        align-items: center;
        border: none;
        box-shadow: none;
        background: transparent;
      ">
              <label style="text-align: center; margin-bottom: 5px;">อุณภูมิน้ำ</label>
              <img src="img/iconOP/1.png" style="height: 50px; width: 50px;" />
              <label style="text-align: center; margin-top: 10px;">{{x.detail[0].op_water_temp}} °C</label>
            </div>

            <div class="card" style="
        display: flex;
        flex-direction: column;
        align-items: center;
        border: none;
        box-shadow: none;
        background: transparent;
      ">
              <label style="text-align: center; margin-bottom: 5px;">CO2</label>
              <img src="img/iconOP/co2.png" style="height: 50px; width: 50px;" />
              <label style="text-align: center; margin-top: 10px;">{{x.detail[0].op_water_co2}} ppm</label>
            </div>

            <div class="card" style="
        display: flex;
        flex-direction: column;
        align-items: center;
        border: none;
        box-shadow: none;
        background: transparent;
      ">
              <label style="text-align: center; margin-bottom: 5px;">o2</label>
              <img src="img/iconOP/o2.png" style="height: 50px; width: 50px;" />
              <label style="text-align: center; margin-top: 10px;">{{x.detail[0].op_water_o2}} %</label>
            </div>
          </div>

          <div style="
        display: flex;
        justify-content: space-around;
        margin-top: 20px;
      ">
            <div class="card" style="
          display: flex;
          flex-direction: column;
          align-items: center;
          border: none;
          box-shadow: none;
          background: transparent;
        ">
              <label style="text-align: center; margin-bottom: 5px;">ปริมาณน้ำฝน</label>
              <img src="img/iconOP/rainfall.png" style="height: 50px; width: 50px;" />
              <label style="text-align: center; margin-top: 10px;">{{x.detail[0].op_water_rain}} mm.</label>
            </div>
          </div>
        </div>
      </div>
    </div> -->



    <!-- <div class="list card" style="margin: 10px 10px; height:auto "
      ng-repeat="x in  vm.historyDetail.result track by $index">

      <div class="item " style="border-left: solid 3pt green;">

        <div class="dp-flex" style="align-items: center;"><a style="font-size: large;">{{x.subdatedesc}} {{x.times}}</a>
          <a style="font-size: x-large;" ng-click="x.check = ! x.check" ng-click="showhide(k)">
            <i class="icon ion-arrow-down-b" ng-if="x.check == true"></i>
            <i class="icon ion-arrow-right-b" ng-if="x.check == false"></i>
          </a>

        </div>
      </div>

      <div class="item item-body" ng-if="x.check">

        <div ng-repeat="k in x.detail">
          <div class="dp-flex"><a>{{k.op__qad01}}</a><a>{{k.op__qad04 ? k.op__qad04 +' นาที':'-'}}</a></div>
        </div>
        <div style="
                display: flex;
                justify-content: space-around;
                margin-top: 20px;
              ">
          <div class="card" style="
                  display: flex;
                  flex-direction: column;
                  align-items: center;
                  border: none;
                  box-shadow: none;
                  background: transparent;
                ">
            <label style="text-align: center; margin-bottom: 5px;">อุณภูมิ</label>
            <img src="img/iconOP/temp.png" style="height: 50px; width: 50px;" />
            <label style="text-align: center; margin-top: 10px;">{{x.detail[0].op__dec01 }} °C</label>
          </div>

          <div class="card" style="
                  display: flex;
                  flex-direction: column;
                  align-items: center;
                  border: none;
                  box-shadow: none;
                  background: transparent;
                ">
            <label style="text-align: center; margin-bottom: 5px;">ความชื้นในดิน</label>
            <img src="img/humidityss.png" style="height: 50px; width: 50px;" />
            <label style="text-align: center; margin-top: 10px;">{{x.detail[0].op__dec02}} %</label>
          </div>

          <div class="card" style="
                  display: flex;
                  flex-direction: column;
                  align-items: center;
                  border: none;
                  box-shadow: none;
                  background: transparent;
                ">
            <label style="text-align: center; margin-bottom: 5px;">ความชื้นอากาศ</label>
            <img src="img/wind.png" style="height: 50px; width: 50px;" />
            <label style="text-align: center; margin-top: 10px;">{{x.detail[0].op__log01}} %</label>
          </div>
        </div>
      </div>
    </div> -->












  </ion-content>

  <script id="hist.html" type="text/ng-template">
    <ion-modal-view style="bottom:10%">
            <ion-header-bar class="hbar">
                <button type="button" class="button button-assertive button-clear" ng-click="closeModalHist()"  style="color:white;font-weight: 400;">close</button>
              <h1 class="title" style="text-align:center;color:white;font-weight: 400;">เลขที่ใบสั่งปลูก : {{histIdSelect.wo_lot}}</h1>
              <!-- <button type="button" class="button icon ion-trash-a button-assertive button-outline" ng-click="vm.deleteCrop()" ></button> -->
            </ion-header-bar>
            <ion-content style=" background-color: #fafafa;">
                

              <style>
                .crd-tiem{
                  display: flex;
                  flex-direction: column;
                  align-items: center;
                  border: none;
                  box-shadow: none;
                  background: transparent;
                  align-self: center;
                }
                </style>
              <div class="list card" style="margin: 10px 10px; height:auto "
              ng-repeat="x in  vm.historyDetail.result track by $index">
        
              <div class="item " style="border-left: solid 3pt green;" ng-click="showhide(x)">
        
                <div class="dp-flex" style="align-items: center;"><a style="font-size: large;">บันทึกกิจกรรมการเพาะปลูก</a>
                  <a style="font-size: x-large;">
                    <i class="icon ion-arrow-down-b" ng-if="x.check == true"></i>
                    <i class="icon ion-arrow-right-b" ng-if="x.check == false"></i>
                  </a>
        
                </div>
        
                <div>{{x.subdatedesc}} {{x.times}}</div>
              </div>
        
              <div class="item item-body" ng-if="x.check">
        
                <div>{{x.detail[0].op_rmks}}</div>
                <div ng-repeat="k in x.detail">
                  <div class="dp-flex"><a>{{k.op__qad01}}</a><a>{{k.op__qad04 ? k.op__qad04 +' นาที':'-'}}</a></div>
                </div>
        
        
        
                <div class="alert alert-secondary" style="background-color: rgba(192,192,192,0.1);border-radius: 20px;margin-top:10px">
                  <div>
                    <h2>สภาพแวดล้อม</h2>
                  </div>
                  <div style="
                  display: flex;
                  justify-content: space-around;
                  margin-top: 20px;
                ">
                    <div class="card crd-tiem">
                      <label style="text-align: center; margin-bottom: 5px;">อุณภูมิ</label>
                      <img src="img/iconOP/1.png" style="height: 50px; width: 50px;" />
                      <label style="text-align: center; margin-top: 10px;">{{x.detail[0].op__dec01 }} °C</label>
                    </div>
        
                    <div class="card crd-tiem">
                      <label style="text-align: center; margin-bottom: 5px;">ความชื้นในดิน</label>
                      <img src="img/iconOP/2.png" style="height: 50px; width: 50px;" />
                      <label style="text-align: center; margin-top: 10px;">{{x.detail[0].op__dec02}} %</label>
                    </div>
        
                    <div class="card crd-tiem">
                      <label style="text-align: center; margin-bottom: 5px;">ความชื้นอากาศ</label>
                      <img src="img/iconOP/4.png" style="height: 50px; width: 50px;" />
                      <label style="text-align: center; margin-top: 10px;">{{x.detail[0].op__log01}} %</label>
                    </div>
        
                  
                  </div>
                  <div style="
                  display: flex;
                  justify-content: space-around;
                  margin-top: 20px;
                ">
                  <div class="card crd-tiem">
                    <label style="text-align: center; margin-bottom: 5px;">ความเร็วลม</label>
                    <img src="img/iconOP/3.png" style="height: 50px; width: 50px;" />
                    <label style="text-align: center; margin-top: 10px;">{{x.detail[0].op__log01}} %</label>
                  </div>
                  <div class="card crd-tiem">
                    <label style="text-align: center; margin-bottom: 5px;">ความเข้มแสง</label>
                    <img src="img/iconOP/5.png" style="height: 50px; width: 50px;" />
                    <label style="text-align: center; margin-top: 10px;">{{x.detail[0].op_light}} lux/lx</label>
                  </div>
                </div>
                
                </div>
        
        
                <div class="alert alert-secondary" style="background-color: rgba(192,192,192,0.1);border-radius: 20px;">
                  <div>
                    <h2>ดิน</h2>
                  </div>
                  <div style="
                display: flex;
                justify-content: space-around;
                margin-top: 20px;
              ">
                    <div class="card crd-tiem" >
                      <label style="text-align: center; margin-bottom: 5px;">N</label>
                      <img src="img/iconOP/npk.png" style="height: 50px; width: 50px;" />
                      <label style="text-align: center; margin-top: 10px;">{{x.detail[0].op_soil_n }}</label>
                    </div>
        
                    <div class="card crd-tiem">
                      <label style="text-align: center; margin-bottom: 5px;">P</label>
                      <img src="img/iconOP/npk.png" style="height: 50px; width: 50px;" />
                      <label style="text-align: center; margin-top: 10px;">{{x.detail[0].op_soil_k}}</label>
                    </div>
        
                    <div class="card crd-tiem" >
                      <label style="text-align: center; margin-bottom: 5px;">K</label>
                      <img src="img/iconOP/npk.png" style="height: 50px; width: 50px;" />
                      <label style="text-align: center; margin-top: 10px;">{{x.detail[0].op_soil_k}}</label>
                    </div>
        
                    <div class="card crd-tiem" >
                      <label style="text-align: center; margin-bottom: 5px;">PH ในดิน</label>
                      <img src="img/iconOP/ph.png" style="height: 50px; width: 50px;" />
                      <label style="text-align: center; margin-top: 10px;">{{x.detail[0].op_soil_ph}} </label>
                    </div>
                  </div>
                </div>
        
                <div class="alert alert-secondary" style="background-color: rgba(192,192,192,0.1);border-radius: 20px;">
                  <div>
                    <h2>น้ำ</h2>
                  </div>
                  <div style="
              display: flex;
              justify-content: space-around;
              margin-top: 20px;
            ">
                    <div class="card crd-tiem" >
                      <label style="text-align: center; margin-bottom: 5px;">PH ในน้ำ</label>
                      <img src="img/iconOP/ph.png" style="height: 50px; width: 50px;" />
                      <label style="text-align: center; margin-top: 10px;">{{x.detail[0].op_water_ph}}</label>
                    </div>
        
                    <div class="card crd-tiem" >
                      <label style="text-align: center; margin-bottom: 5px;">อุณภูมิน้ำ</label>
                      <img src="img/iconOP/1.png" style="height: 50px; width: 50px;" />
                      <label style="text-align: center; margin-top: 10px;">{{x.detail[0].op_water_temp}} °C</label>
                    </div>
        
                    <div class="card crd-tiem" >
                      <label style="text-align: center; margin-bottom: 5px;">CO2</label>
                      <img src="img/iconOP/co2.png" style="height: 50px; width: 50px;" />
                      <label style="text-align: center; margin-top: 10px;">{{x.detail[0].op_water_co2}} ppm</label>
                    </div>
        
                 
                  </div>
        
                  <div style="
                display: flex;
                justify-content: space-around;
                margin-top: 20px;
              ">
                 <div class="card crd-tiem" >
                  <label style="text-align: center; margin-bottom: 5px;">o2</label>
                  <img src="img/iconOP/o2.png" style="height: 50px; width: 50px;" />
                  <label style="text-align: center; margin-top: 10px;">{{x.detail[0].op_water_o2}} %</label>
                </div>
                
                    <div class="card crd-tiem" >
                      <label style="text-align: center; margin-bottom: 5px;">ปริมาณน้ำฝน</label>
                      <img src="img/iconOP/rainfall.png" style="height: 50px; width: 50px;" />
                      <label style="text-align: center; margin-top: 10px;">{{x.detail[0].op_water_rain}} mm.</label>
                    </div>
                  </div>
                </div>
              </div>
            </div>
        
          
            </ion-content>
          </ion-modal-view>
        </script>
</ion-view>
