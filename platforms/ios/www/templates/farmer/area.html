<ion-view hide-back-button="false" cache-view="false">

  <ion-nav-title> พื้นที่เกษตรกร
  </ion-nav-title>
  <ion-nav-buttons side="right">
    <button type="button" class="button button-clear ion-plus-round" ng-click="vm.addcrop()" style="color:white;font-weight: bold;"> เพิ่ม</button>
  </ion-nav-buttons>
  <style>
    /* .abc:active {
      transform: scale(0.8);
    } */
  </style>
  <!-- <button type="button" class="abc button button-large " style="position: absolute;
  z-index: 50;
  bottom: 55px;
  left: 15px;
  border-radius: 50%;
  min-height:55px;
  min-width:55px;
  background-color:#0C9;
	color:#FFF;
	text-align:center;
  box-shadow: 2px 2px 3px #999;
  " ng-click="vm.addcrop()">
    <i class="icon ion-plus-round"></i>
  </button> -->
  <!-- <style>
  .scroll{
    height: 150%;
  }
  
  </style> -->
    <ion-content style="background:#f5f5f5;">
      <ion-refresher pulling-text="Pull to refresh" on-refresh="doRefresh()"></ion-refresher>
      <div class="list">
  
        <div class="item item-avatar" ng-repeat="x in data.result" ng-if="status == true">
          <img ng-if="x.imgpath" ng-src="{{x.imgpath}}" style="object-fit: contain;">
          <img ng-if="!x.imgpath" src="img/noimage1.jpg">

          <div style="    white-space: initial;
          overflow: hidden;
          text-overflow: ellipsis;">
  
            <div style="display: flex;
            justify-content: space-between;">
              <a style="    font-weight: bold;
              font-size: large;">
                {{x.farm_name}} 
                <!-- <button type="button" class="button icon ion-edit button-clear button-energized"  ng-click="vm.edit(x)"  style="    position: absolute;
                top: 0px;">
              
       
                </button> -->
              </a>
 

              <a ng-if="x.farm_status == 'APPROVE'" style="color:green"><i class="icon ion-checkmark-circled"></i> อนุมัติ</a>
              <a ng-if="x.farm_status == 'REJECT'" style="color:red"><i class="icon ion-close-circled"></i> ไม่อนุมัติ</a>
              <a ng-if="x.farm_status == 'INACTIVE'" style="color:red">ยกเลิกใช้งาน</a>


              <a ng-if="!x.farm_status" > รออนุมัติ</a>

              
            </div>
          <p style="white-space: break-spaces;">{{x.address}}</p>
  
            <p><b>{{x.createname.mob_fname}} {{x.createname.mob_lname}}</b></p>
            <div style="margin-top: -3px;display: flex;
            align-items: baseline;
            justify-content: space-between;">
              <a>
                <img
                ng-src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAAABHNCSVQICAgIfAhkiAAAAAlwSFlzAAACkwAAApMBv+Bu1wAAABl0RVh0U29mdHdhcmUAd3d3Lmlua3NjYXBlLm9yZ5vuPBoAAAM3SURBVFiF7ZRPaBxlGMZ/78SZrO5poZWSghcv9V8l9mKgl5I29dJAhaWpSLtWZ3YM5BB6KT0NqD1oacC97M4EOtBioxE8iNJWaKEqIvgHtAaR3izElhIKweruZOf1kEmZbnayI25P5r18M9/7fM/zfO/3fh9sxv895N8uKJfLVqlUeg14A3gymb4hIrOqetb3/eihGXBdd3scx58Cw13JRL5X1QO+7y/m5TTyAiuVSiGO488T8d+Ag8BWYKuqvgzcUNVdwGflctnKy/tIXqBlWW8CO4FfW63WSBiGd1PpTyqVylXLsr4Fhkulkgu8n4c3dwWAVwBE5EQiLrZtT1Sr1UOAhGF4V1VPpLH9NrADIIqiKwCO4xwWkQuqOmfb9qHE3JUE+9TDMNAEKBQKRQBVvd/AhmEIwMrKSjGN7beBHwHa7fY4QBAEH6jqYRGZaDQacwCmaY4DiMgPeUlzNyFwHtgLOEAAaBAEc6m8qKqdwuaK3BUoFosfAbdVdZdt2wc689VqdRx4Afij2Wx+3HcDMzMzfwGnAUTklOd599d6nmeo6jvJ7+kwDP/Oy5v5EjqOcxPYnrlw9ew/BLBte0JELmyg87vv+0/kNuA4znPATxsQAtyJouhpANM0F4AtG4FV9dkgCH7pnM9qwtFkPOf7/pF0wvM8Y3Fx8WtVfdE0zVPJddwCfDM0NLTb87y4YzPngFdFZBRYZyCrB8YS1190JjzPi0XEBlrA6yJyDGipqt0pDiAiaxxj3YTWGZienn4U2APowMDApW6L6vX6deBtVo9QROStbuUFaLfblwAF9kxNTQ32NLC8vDwCFICf6/X67W6kAIODg+8CC8CCZVnvZeFmZ2dvAdeBx6IoGulpwDCMfaxu63IWKUCtVmuKyNE4jo/UarVeT+9lAFVddwzdmvClZLzYg5RGo/FdL0wifFFEjqvqfuBkOvdABSYnJ7cBzwN/Li0tfZmHPE9EUfQVcA8Ydl338UwDURSNstpY1+bn51v9MpC8jNcAieN4b6YBEdmXfK67fv811q5jSgN4sAcE2J98n3Ec50w/Dajq2jiWaCmkKuC67jPAtn6KZsRQorUZmwHAPylaJT32wwBUAAAAAElFTkSuQmCC"
                style="
                top: 3px;
                position: relative;
                height: 20px;
                width: 20px;
                ">
                <span ng-if="x.farm_area_farm">{{x.farm_area_farm |number}} ไร่</span> 
                <span ng-if="x.farm_area_work">{{x.farm_area_work |number}} งาน</span> 
                <span ng-if="x.farm_area_wah">{{x.farm_area_wah |number}} ตารางวา</span>
              </a>



            <!-- <a ng-click="vm.add5(x)" style="color:blue">  โรงเรือน / แปลง <i class="icon ion-arrow-right-c">  </i></a> -->
            <button class="button button-small  button-energized"
             ng-click="vm.edit(x)"
             
             style="font-weight: bold;" >  แก้ไขพื้นที่ <i class="icon ion-edit">  </i></button>
            

             
            
  
            </div>
  
  
  
          </div>

          <div >
            <img ng-src="{{k.standardicon}}" style="    width: 25px;
            height: 25px;" ng-repeat="k in x.standard">
          </div>
       
  
      
     
  
  
        </li>
  
        <h3 style="text-align: center;color:gray;margin-top:20%" ng-if="data.status == false && status == true">ยังไม่ได้สร้างพื้นที่ </h3>
        <h3 ng-click="vm.refresh()" style="text-align: center;color:gray;margin-top:20%" ng-if="status == false">เกิดข้อผิดพลาดในการเชื่อมต่อลองใหม่อีกครั้ง 
        <i class="icon ion-refresh"></i>
        </h3>
        
        <div ng-if="!data" style="margin-top:20% ">
          <ion-spinner icon="spiral" class="spinner-dark"
            style="position: absolute; zoom:2;display: inline-block;left:45%"></ion-spinner>
        </div>
  
  
      </div>
      </div>
  
      <script id="my-modaledit.html" type="text/ng-template">
        <ion-modal-view style="border-raduius:10px;border-radius: 10px;">
          <ion-header-bar>
              <button type="button" class="button button-assertive button-clear" ng-click="closeModalEdit()">close</button>
            <h1 class="title" style="text-align:center">แก้ไขพื้นที่</h1>
            <button type="button" class="button icon ion-trash-a button-assertive button-outline" ng-click="vm.deleteCrop()" ></button>
          </ion-header-bar>
          <ion-content >
            <div class="list " style="border-radius: 15px;">
              <div class="item item-avatar item-icon-right" ng-click="vm.selectIcon()" on-hold="vm.removeIcon()" >
                <img ng-if="editdata.imgpath" ng-src="{{editdata.imgpath}}">
                <img ng-if="!editdata.imgpath" src="img/noimage1.jpg">
                <div style="margin-top: 10px;">แตะเพื่อเปลี่ยนรูป</div>
             
              </div>
            
              <div class="item item-avatar item-icon-right" ng-click="vm.editMap()">
                  <img src="img/ServiceArea.png">
                  <h2 style="font-weight: bold">พิกัดพื้นที่</h2>
                  <p>{{positionEdit.lat[0]}} , {{positionEdit.lng[0]}}</p>
                  <i class="icon ion-chevron-right"></i>
                  
                </div>
    
            <div class="list">
              <label class="item item-input item-stacked-label">
                <span class="input-label">ชื่อ Farm</span>
                <input type="text" placeholder="ชื่อ" ng-model="editdata.farm_name">
              </label>
      

              <label class="item item-input item-stacked-label">
                <span class="input-label">รายละเอียด</span>
                <input type="text" placeholder="รายละเอียด" ng-model="editdata.farm_desc">
              </label>
       
           
              <div></div>
      
            </div>
      
      
            <div class="container">
              <table id="customers">
                <tr>
                  <th width="33%" style="text-align:center">ไร่</th>
                  <th width="33%" style="text-align:center">งาน</th>
                  <th width="33%" style="text-align:center">ตารางวา</th>
                </tr>
                <tr>
                  <td><input type="text" ng-model="editdata.farm_area_farm" id="inp001" class="form-control" /></td>
                  <td><input type="text" ng-model="editdata.farm_area_work" id="inp002" class="form-control" /></td>
                  <td><input type="text" ng-model="editdata.farm_area_wah" id="inp003" class="form-control" /></td>
                </tr>
              </table>
            </div>
  
            <div class="container" style="margin-top:20px">
              <button type="button" class="button button-balanced button-block" ng-click="vm.updateCrop()" ng-disabled="checkUpdate()" style="border-radius: 10px;">บันทึก</button>
  
            </div>
          </ion-content>
        </ion-modal-view>
      </script>
  
  
      <script id="my-crop.html" type="text/ng-template">
        <ion-modal-view>
  
        
  
          <ion-header-bar>
            <button type="button" class="button button-assertive button-clear" ng-click="closeModalCrop()">close</button>
            <h1 class="title" style="text-align:center">เลือกCROP</h1>
          </ion-header-bar>
  
          <ion-content >
          <ion-slide-box ng-init="lockSlide()"  show-pager="false">
           <ion-slide >
            <div class="list">
              <a class="item  item-button-right " ng-repeat="k in mstrCrop">
  
                <h2>{{k.crop_code}}</h2>
                <p>{{k.crop_desc}}</p>
                <p>เริ่ม : {{k.crop_start_date}} สิ้นสุด : {{k.crop_stop_date}}</p>
           
  
                <button type="button" class="button button-positive" style="height:50%;top: 30%;border-radius: 10px;" ng-click="vm.mstrCropSelect(k)">
                    เลือก
                  </button>
       
  
              </a>
          </div>
        </ion-slide >
      </ion-slide-box>
  
          </ion-content>
  
   
  
  
        </ion-modal-view>
      </script>
  
  
      <script id="my-map.html" type="text/ng-template">
        <ion-modal-view style="border-raduius:10px;border-radius: 10px;">
          <ion-header-bar>
              <button type="button" class="button button-assertive button-clear" ng-click="closeModalMap()">close</button>
            <h1 class="title" style="text-align:center">map</h1>
            <!-- <button type="submit" class="button icon ion-trash-a button-assertive button-outline" ng-click="vm.deleteCrop()" ></button> -->
          </ion-header-bar>
          <ion-content  class="wrapper_all" scroll="false">
            <style>
               .top_float {
                /* position:fixed; */
                cursor: pointer;
                width: 68px;
                height: 68px;
                bottom: 120px;
                right: 40px;

                color: #FFF;
                border-radius: 50px;
                border: none;
                text-align: center;
                font-size: 34px;
                box-shadow: 2px 2px 3px 1px #999;
                z-index: 100;
                outline: 0 !important;
              }

            </style>
               <button type="button" class="button button-balanced icon-left ion-checkmark-round" ng-click="vm.save()" style="text-align: center;
               position: absolute;
               z-index: 2;
               right: 10px;
               margin-left: 10px;
               border-radius: 10px;
               bottom: 5%;
               width: 40%;
               left: 31%;">บันทึก</button>
  
              <!-- <button type="button" class="button button-balanced" ng-click="vm.save()" style="text-align: center;position:absolute;z-index:2;top:60px;right:10px;margin-left:10px;border-radius: 20px;border-color: black">Save</button> -->
                      <div id="maps"></div>

                      <button type="button" class="button icon ion-pinpoint top_float" ng-click="vm.here()"
                      style="text-align: center;position:absolute;z-index:2;bottom:5%;left:10px;margin-left:10px;color:black"></button> 
  
          </ion-content>
        </ion-modal-view>
      </script>
  
  
    </ion-content>
  </ion-view>